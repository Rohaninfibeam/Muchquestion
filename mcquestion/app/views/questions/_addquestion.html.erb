<script type="text/javascript">
	$(document).ready(function(){
		$("#add-question,#add-option,#add-questiontype").click(function(){
		button=this.id.split("-")[1]
		length=$("#".concat(button,"-type")).children('div').length
		clonedtype=$(this).parent().find("#".concat(button,"-type")).children().last().clone(true);
		$(this).parent().find("#".concat(button,"-type")).append(clonedtype)
		$(this).parent().find("#".concat(button,"-type")).children().last().find(":input").each(function(){
			this.name=this.name.replace(this.name.substr(this.name.indexOf(button)),this.name.substr(this.name.indexOf(button)).replace(/[0-9]+/,length))
		});
		});
	});
</script>

<div class="form-group">
	<label>Question name</label>
	<%=f.text_field :name, class: "form-control"%>
</div>
<div class="form-group">
	<label>Question</label>
	<%=f.text_area :question, class: "form-control", rows: "5"%>
</div>
	
<span class="glyphicon glyphicon-plus" id="add-option"></span>
<div id="option-type">
	<div>
		options <%=f.fields_for :options do |opti|%>
			<%=opti.check_box :istrue%>
			<%=opti.text_field :value%>
		<% end %>
	</div>
	<div>
		options	<%=f.fields_for :options do |opti|%>
			<%=opti.check_box :istrue%>
			<%=opti.text_field :value%>
		<% end %>
	</div>
</div>


	
	<!-- <div>
		<%=f.fields_for :options do |opti|%>
			<%=opti.check_box :istrue%>
			<%=opti.text_field :value%>
		<% end %>
	</div>
	<div>
		<%=f.fields_for :options do |opti|%>
			<%=opti.check_box :istrue%>
			<%=opti.text_field :value%>
		<% end %>
	</div>-->
	
	
<!-- </div> -->
<div>
	Question Type<%=f.collection_select :questiontype_ids, Questiontype.all, :id, :qtype,{},{:multiple => true} %>
</div>

<span class="glyphicon glyphicon-plus" id="add-questiontype"></span>
<div id="questiontype-type">
	<div>
		Add Question type<%=f.fields_for :questiontypes do |qtyp|%>
			<%=qtyp.text_field :qtype%>
		<% end %>
	</div>
</div>
